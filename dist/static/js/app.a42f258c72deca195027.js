webpackJsonp([2,0],{0:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(125),a=i(r),s=n(109),o=(i(s),n(108)),u=i(o),d=n(105),l=(i(d),n(104)),c=(i(l),n(103)),f=(i(c),n(62)),g=i(f),p=n(119),h=i(p);a.default.use(u.default),new a.default({el:"#app",template:"<app/>",framework7:{root:"#app",routes:g.default},components:{app:h.default}})},28:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={materials:[{id:5399,name:"猪"},{id:104,name:"鸡"},{id:5443,name:"牛"},{id:5418,name:"羊"},{id:275,name:"鸭"},{id:605,name:"牛蛙"},{id:719,name:"兔肉"},{id:20132,name:"饭"},{id:20133,name:"面"},{id:20148,name:"饺子"},{id:20150,name:"混沌"},{id:957,name:"鱼"},{id:4553,name:"贝"},{id:469,name:"虾"},{id:1183,name:"螃蟹"}],taste:[{id:51359,name:"辣"},{id:51922,name:"咖喱"},{id:40066,name:"糖醋"},{id:52413,name:"蒜香"},{id:51449,name:"酸甜"},{id:52407,name:"奶香"},{id:52401,name:"孜然"},{id:51875,name:"鱼香"},{id:52399,name:"五香"},{id:51460,name:"清淡"}]}},59:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(){g.learn(p)}function a(t){var e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];t.categories.forEach(function(t){var n={};h.forEach(function(e){var i=f.default.findIndex(e.family,t);i>-1&&(n=e.parent)});var i=f.default.findIndex(l.default.materials,n);i>-1&&(e[i]=1)});var n=5*g.predict(e);return n=Math.round(n)}function s(t,e){var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];t.categories.forEach(function(t){var e={};h.forEach(function(n){var i=f.default.findIndex(n.family,t);i>-1&&(e=n.parent)});var i=f.default.findIndex(l.default.materials,e);i>-1&&(n[i]=1)});var i={input:n,output:[e/5]};console.log(i),p.push(i)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(114),u=i(o),d=n(28),l=i(d),c=n(112),f=i(c),g=(0,u.default)({learningRate:.3,activator:"sigmoid"}),p=[],h=window.localStorage.getItem("wtet_categories");null!==h&&(h=JSON.parse(h));var m={learn:r,predict:a,rate:s};e.default=m},60:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(67),a=i(r),s=n(41),o=i(s),u=o.default.create({baseURL:""}),d=function(t){var e=function(t){return t.data},n=function(t){return console.error("Request Failed:",t.config),t.response?(console.error("Status:",t.response.status),console.error("Data:",t.response.data),console.error("Headers:",t.response.headers)):console.error("Error Message:",t.message),a.default.reject(t.response||t.message)};return u(t).then(e).catch(n)};e.default=d},61:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(){var t=window.localStorage.getItem("wtet_categories");null!==t&&0!==t.length||!function(){t=[];for(var e=l.default.materials,n=function(n){var i=e[n].id,r=[e[n]];(0,f.default)({url:"/api/fetchAllByPid/"+i,method:"GET"}).then(function(i){if(i&&i.length>0)for(var a=0;a<i.length;a++)r.push({id:i[a].id,name:i[a].name});t.push({parent:e[n],family:r})})},i=0;i<e.length;i++)n(i);setTimeout(function(){t.length===l.default.materials.length&&window.localStorage.setItem("wtet_categories",(0,u.default)(t))},4e3)}()}function a(){var t=window.localStorage.getItem("wtet_categories");null!==t&&(t=JSON.parse(t));var e=s(t.length),n=s(t[e].family.length),i=t[e].family[n],r=i.id,a=i.name;return(0,f.default)({url:"/api/fetchRandomRecipe/"+r+"/"+a,method:"GET"})}function s(t){return Math.floor(Math.random()*t)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(66),u=i(o),d=n(28),l=i(d),c=n(60),f=i(c),g={getAllCategories:r,generateARecipe:a};r(),e.default=g},62:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=[]},63:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(120),a=i(r),s=n(61),o=i(s),u=n(59),d=i(u);e.default={data:function(){return{recipe:{},description:"",numRated:0,resetableRating:0,predictRating:0}},created:function(){this.description="先看看你的口味,10次之后,我会作出预测",this.fetchRandomRecipe()},methods:{fetchRandomRecipe:function(){var t=this;o.default.generateARecipe().then(function(e){t.recipe=e,t.resetRating(),t.numRated>10&&(d.default.learn(),t.description="如果我说错了,请告诉我,我会越来越懂你",t.predictRating=d.default.predict(e))})},skip:function(){this.fetchRandomRecipe()},setRating:function(t){var e=this;e.resetableRating=t,e.numRated++,d.default.rate(e.recipe,t),setTimeout(function(){e.fetchRandomRecipe()},0)},resetRating:function(){this.resetableRating=0}},components:{StarRating:a.default}}},64:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(121),a=i(r);e.default={components:{star:a.default},props:{increment:{type:Number,default:1},rating:{type:Number,default:0},activeColor:{type:String,default:"#ffd055"},inactiveColor:{type:String,default:"#d8d8d8"},maxRating:{type:Number,default:5},starSize:{type:Number,default:50},showRating:{type:Boolean,default:!0},readOnly:{type:Boolean,default:!1},textClass:{type:String,default:""},inline:{type:Boolean,default:!1},borderColor:{type:String,default:"#999"},borderWidth:{type:Number,default:0},padding:{type:Number,default:0}},created:function(){this.step=100*this.increment,this.currentRating=this.rating,this.selectedRating=this.rating,this.createStars()},methods:{setRating:function(t,e){if(!this.readOnly){var n=t.position/100;this.currentRating=(t.id+n-1).toFixed(2),this.currentRating=this.currentRating>this.maxRating?this.maxRating:this.currentRating,this.createStars(),e?(this.selectedRating=this.currentRating,this.$emit("rating-selected",this.selectedRating)):this.$emit("current-rating",this.currentRating)}},resetRating:function(){this.readOnly||(this.currentRating=this.selectedRating,this.createStars())},createStars:function(){this.round();for(var t=0;t<this.maxRating;t++){var e=0;t<this.currentRating&&(e=this.currentRating-t>1?100:100*(this.currentRating-t)),this.$set(this.fillLevel,t,Math.round(e))}},round:function(){var t=1/this.increment;this.currentRating=Math.ceil(this.currentRating*t)/t}},watch:{rating:function(t){this.currentRating=t,this.selectedRating=t,this.createStars()}},data:function(){return{step:0,fillLevel:[],currentRating:0,selectedRating:0}}}},65:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{fill:{type:Number,default:0},size:{type:Number,default:50},starId:{type:Number,required:!0},activeColor:{type:String,required:!0},inactiveColor:{type:String,required:!0},borderColor:{type:String,default:"#000"},borderWidth:{type:Number,default:0},padding:{type:Number,default:0}},created:function(){this.calculatePoints,this.grad=Math.random().toString(36).substring(7)},computed:{calculatePoints:function(){var t=this;this.starPoints=this.starPoints.map(function(e){return t.size/43*e+1.5*t.borderWidth})},starPointsToString:function(){return this.starPoints.join(",")},getGradId:function(){return"url(#"+this.grad+")"},getSize:function(){return parseInt(this.size)+parseInt(3*this.borderWidth)+this.padding},getFill:function(){return this.fill+"%"}},methods:{mouseMoving:function(t){this.$emit("star-mouse-move",{event:t,position:this.getPosition(t),id:this.starId})},getPosition:function(t){var e=.92*this.size,n=Math.round(100/e*t.offsetX);return n>100?100:n},selected:function(t){this.$emit("star-selected",{id:this.starId,position:this.getPosition(t)})}},data:function(){return{starPoints:[19.8,2.2,6.6,43.56,39.6,17.16,0,17.16,33,43.56],grad:""}}}},103:function(t,e){},104:function(t,e){},105:function(t,e){},106:function(t,e){},107:function(t,e){},119:function(t,e,n){n(106);var i=n(22)(n(63),n(123),null,null);t.exports=i.exports},120:function(t,e,n){n(107);var i=n(22)(n(64),n(124),"data-v-5d7117b8",null);t.exports=i.exports},121:function(t,e,n){var i=n(22)(n(65),n(122),null,null);t.exports=i.exports},122:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{height:t.getSize,width:t.getSize},on:{mousemove:t.mouseMoving,click:t.selected}},[n("linearGradient",{attrs:{id:t.grad,x1:"0",x2:"100%",y1:"0",y2:"0"}},[n("stop",{attrs:{offset:t.getFill,"stop-color":t.activeColor}}),t._v(" "),n("stop",{attrs:{offset:t.getFill,"stop-color":t.inactiveColor}})],1),t._v(" "),n("polygon",{attrs:{points:t.starPointsToString,fill:t.getGradId,stroke:t.borderColor,"stroke-width":t.borderWidth}}),t._v(" "),n("polygon",{attrs:{points:t.starPointsToString,fill:t.getGradId}})],1)},staticRenderFns:[]}},123:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("f7-views",[n("f7-view",{attrs:{id:"main-view",main:""}},[n("f7-pages",[n("f7-page",[n("f7-card",{attrs:{title:t.recipe.name,content:t.description}},[n("div",{staticClass:"recipe-block"},[n("img",{attrs:{src:t.recipe.lImage}})])]),t._v(" "),n("f7-block",[n("f7-grid",[n("f7-col",{attrs:{width:"30"}},[n("a",{staticClass:"button color-yellow button-fill button-big",attrs:{href:"#"},on:{click:t.skip}},[t._v("跳过")])]),t._v(" "),n("f7-col",{attrs:{width:"70"}},[n("star-rating",{attrs:{"inactive-color":"#000","active-color":"#f00","star-size":40,"show-rating":!1,rating:t.resetableRating},on:{"rating-selected":t.setRating}})],1)],1)],1),t._v(" "),t.numRated>10?n("f7-block",{staticClass:"prediction"},[n("f7-grid",[n("f7-col",{staticClass:"prediction-note",attrs:{width:"30"}},[t._v("\n                                猜你多喜欢:\n                            ")]),t._v(" "),n("f7-col",{attrs:{width:"70"}},[n("star-rating",{attrs:{"inactive-color":"#000","active-color":"#f00","star-size":40,"show-rating":!1,"read-only":!0,rating:t.predictRating}})],1)],1)],1):t._e()],1)],1)],1)],1)],1)},staticRenderFns:[]}},124:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["star-rating",{inline:t.inline}]},[n("div",{staticClass:"star-rating",on:{mouseleave:t.resetRating}},[t._l(t.maxRating,function(e){return n("span",{class:[{pointer:!t.readOnly},"star"]},[n("star",{attrs:{fill:t.fillLevel[e-1],size:t.starSize,"star-id":e,step:t.step,"active-color":t.activeColor,"inactive-color":t.inactiveColor,"border-color":t.borderColor,"border-width":t.borderWidth,padding:t.padding},on:{"star-selected":function(e){t.setRating(e,!0)},"star-mouse-move":t.setRating}})],1)}),t._v(" "),t.showRating?n("span",{class:["rating-text",t.textClass]},[t._v(" "+t._s(t.currentRating))]):t._e()],2)])},staticRenderFns:[]}}});
//# sourceMappingURL=app.a42f258c72deca195027.js.map